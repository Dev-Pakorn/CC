<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- CSS Dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
    <link href="admin.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    
    <!-- Login Screen -->
    <div id="loginOverlay">
        <div class="card p-4 text-center shadow-lg" style="width: 350px;">
            <h3 class="mb-3">üîê Admin Login</h3>
            <div class="mb-2"><input type="text" id="loginUser" class="form-control" placeholder="Username (admin)"></div>
            <div class="mb-3"><input type="password" id="loginPass" class="form-control" placeholder="Password (1234)"></div>
            <button onclick="checkLogin()" class="btn btn-primary w-100">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-dark bg-dark px-3 sticky-top">
        <a class="navbar-brand" href="#">üõ†Ô∏è CKLab Admin Panel</a>
        <button class="btn btn-sm btn-outline-danger" onclick="location.reload()">Logout</button>
    </nav>

    <div class="container-fluid py-4">
        <div class="row g-4">
            <!-- Sidebar -->
            <div class="col-md-2">
                <div class="nav flex-column nav-pills card-dashboard bg-white p-3" id="v-pills-tab" role="tablist">
                    <button class="nav-link active mb-2 text-start" data-bs-toggle="pill" data-bs-target="#flow1" onclick="renderMonitor()">üìä 1. Monitor</button>
                    <button class="nav-link mb-2 text-start" data-bs-toggle="pill" data-bs-target="#flow2" onclick="renderPCList()">üñ•Ô∏è 2. Manage PC</button>
                    <button class="nav-link mb-2 text-start" data-bs-toggle="pill" data-bs-target="#flow3" onclick="renderSoftList()">üíæ 3. Manage Software</button>
                    <button class="nav-link mb-2 text-start" data-bs-toggle="pill" data-bs-target="#flow4" onclick="renderReport()">üìà 4. Reports</button>
                    <button class="nav-link mb-2 text-start" data-bs-toggle="pill" data-bs-target="#flow5" onclick="loadConfig()">‚öôÔ∏è 5. Configure</button>
                </div>
            </div>

            <!-- Content -->
            <div class="col-md-10">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Flow 1: Monitor -->
                    <div class="tab-pane fade show active" id="flow1">
                        <div class="card card-dashboard p-4">
                            <h4 class="mb-4 border-bottom pb-2">üî¥ Real-time Dashboard</h4>
                            <div class="row g-3" id="monitorGrid"></div>
                        </div>
                    </div>
                    
                    <!-- Flow 2: Manage PC -->
                    <div class="tab-pane fade" id="flow2">
                        <div class="card card-dashboard p-4">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4>üñ•Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</h4>
                                <button class="btn btn-success" onclick="openPCModal()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</button>
                            </div>
                            <table class="table table-hover align-middle">
                                <thead class="table-light"><tr><th>ID</th><th>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>Software</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
                                <tbody id="pcTable"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Flow 3: Manage Software -->
                    <div class="tab-pane fade" id="flow3">
                        <div class="card card-dashboard p-4">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4>üíæ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå</h4>
                                <button class="btn btn-success" onclick="openSoftModal()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏° Software</button>
                            </div>
                            <table class="table table-hover align-middle">
                                <thead class="table-light"><tr><th>ID</th><th>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</th><th>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
                                <tbody id="softTable"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Flow 4: Report -->
                    <div class="tab-pane fade" id="flow4">
                        <div class="card card-dashboard p-4">
                            <h4 class="mb-4">üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h4>
                            <!-- Filter UI -->
                            <div class="row g-2 mb-4 bg-light p-3 rounded mx-1">
                                <div class="col-md-2"><small>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</small><input type="date" id="dStart" class="form-control form-control-sm"></div>
                                <div class="col-md-2"><small>‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</small><input type="date" id="dEnd" class="form-control form-control-sm"></div>
                                <div class="col-md-3">
                                    <small>‡∏Ñ‡∏ì‡∏∞/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</small>
                                    <select id="filterFac" class="form-select form-select-sm">
                                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                        <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                        <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                        <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ì‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ó‡∏≥‡πÑ‡∏ß‡πâ -->
                                    </select>
                                </div>
                                <div class="col-md-2"><small>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</small><select id="filterType" class="form-select form-select-sm"><option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option><option value="internal">‡∏†‡∏≤‡∏¢‡πÉ‡∏ô</option><option value="external">‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</option></select></div>
                                <div class="col-md-2"><small>‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</small><select id="filterYear" class="form-select form-select-sm"><option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
                                <div class="col-md-1 d-flex align-items-end"><button onclick="renderReport()" class="btn btn-primary btn-sm w-100">üîç</button></div>
                            </div>
                            <div style="height:300px; margin-bottom: 30px;"><canvas id="chart"></canvas></div>
                            <h5 class="mb-3">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h5>
                            <div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
                                <table class="table table-bordered table-sm table-striped">
                                    <thead class="table-dark text-center" style="position: sticky; top: 0;"><tr><th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</th><th>‡∏Ñ‡∏ì‡∏∞</th></tr></thead>
                                    <tbody id="logTableBody"></tbody>
                                </table>
                            </div>
                            <hr>
                            <button onclick="realExportCSV()" class="btn btn-outline-success">üì• Export CSV</button>
                        </div>
                    </div>

                    <!-- Flow 5: Config -->
                    <div class="tab-pane fade" id="flow5">
                        <div class="card card-dashboard p-4">
                            <h4 class="mb-4">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h4>
                            <div class="mb-3"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£</label><input type="text" id="confName" class="form-control"></div>
                            <div class="mb-3"><label>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</label><textarea id="confAnnounce" class="form-control" rows="3"></textarea></div>
                            <button onclick="saveConfig()" class="btn btn-primary">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal fade" id="modalPC" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header"><h5 class="modal-title" id="pcModalTitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
                <div class="modal-body">
                    <input type="hidden" id="editPcId">
                    <div class="mb-3"><label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</label><input type="text" id="inpPcName" class="form-control"></div>
                    <div class="mb-3"><label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label><select id="inpPcStatus" class="form-select"><option value="available">Available</option><option value="in_use">In-use</option><option value="maintenance">Maintenance</option><option value="reserved">Reserved</option></select></div>
                    <div class="mb-3"><label>Software</label><div id="pcSoftList" class="border p-2 rounded" style="max-height: 150px; overflow-y: auto;"></div></div>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button><button onclick="savePC()" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button></div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalSoft" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header"><h5 class="modal-title" id="softModalTitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
                <div class="modal-body"><input type="hidden" id="editSoftId"><div class="mb-3"><label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</label><input type="text" id="inpSoftName" class="form-control"></div><div class="mb-3"><label>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</label><input type="text" id="inpSoftVer" class="form-control"></div></div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button><button onclick="saveSoft()" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button></div>
            </div>
        </div>
    </div>

    <!-- JS Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="mock-db.js"></script>
    <script src="admin.js"></script>
</body>
</html>